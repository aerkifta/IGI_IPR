{% extends 'main/base.html' %}

{% block title %}
    {{ title }}
{% endblock %}

{% block content %}
<h1>Экспонаты</h1>

{% if user.is_authenticated and user.is_superuser %}
    <a href="create-exhibit" class="btn">Добавить экспонат</a>
{% endif %}

<form method="POST" class="search-block">
    {% csrf_token %}
    <label>Поиск:</label>
    <input type="text" name="keyword">
    <br>
    <button type="submit" class="btn">Найти</button>
    <a href="{{ request.path }}" class="btn secondary">Очистить</a>
</form>

<form method="GET" class="filter-block">
    <button type="submit" name="latest" value="latest" class="btn outline">
        Недавно поступившие
    </button>
</form>

{% if exhibits %}
    {% for el in exhibits %}
        <div class="card">
            {% if el.image %}
                <img src="{{ el.image.url }}" alt="{{ el.name }}" class="preview">
            {% endif %}

            <h4>Вид искусства: {{ el.art_form.name }}</h4>
            <h3>Наименование экспоната: {{ el.name }}</h3>
            <p>{{ el.description }}</p>
            <p><strong>Дата поступления:</strong> {{ el.period }}</p>
            <p><strong>Смотрящий:</strong> {{ el.employee }}</p>

            {% if user.is_authenticated and user.is_superuser %}
                <a href="edit-exhibit/{{ el.id }}" class="btn info">Редактировать</a>
                <a href="delete-exhibit/{{ el.id }}" class="btn danger">Удалить</a>
            {% endif %}
        </div>
    {% endfor %}
{% else %}
    <p>Нет информации</p>
{% endif %}
{% endblock %}
